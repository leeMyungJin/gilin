/*!
    *
    * Wijmo Library 5.20211.781
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),__awaiter=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i.throw(e))}catch(e){o(e)}}function step(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(a){return function step(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;(i=0,n)&&(o=[2&o[0],n.value]);switch(o[0]){case 0:case 1:n=o;break;case 4:s.label++;return{value:o[1],done:!1};case 5:s.label++;i=o[1];o=[0];continue;case 7:o=s.ops.pop();s.trys.pop();continue;default:if(!(n=s.trys,n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1];n=o;break}if(n&&s.label<n[2]){s.label=n[2];s.ops.push(o);break}n[2]&&s.ops.pop();s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e];i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};!function(e){!function(t){var r=function(t){__extends(RestCollectionView,t);function RestCollectionView(r){var i=t.call(this)||this;i._loading=!1;i._fields=null;i._keys=null;i._sortOnServer=!0;i._pageOnServer=!0;i._filterOnServer=!0;i._totalItemCount=0;i.loading=new e.Event;i.loaded=new e.Event;i.error=new e.Event;r&&e.copy(i,r);i.sortDescriptions.collectionChanged.addHandler((function(){i.sortOnServer&&i._getData()}));i._getData();return i}Object.defineProperty(RestCollectionView.prototype,"fields",{get:function(){return this._fields},set:function(t){if(this._fields!=t){this._fields=e.asArray(t);this._getData()}},enumerable:!0,configurable:!0});Object.defineProperty(RestCollectionView.prototype,"sortOnServer",{get:function(){return this._sortOnServer},set:function(t){if(t!=this._sortOnServer){this._sortOnServer=e.asBoolean(t);this._getData()}},enumerable:!0,configurable:!0});Object.defineProperty(RestCollectionView.prototype,"pageOnServer",{get:function(){return this._pageOnServer},set:function(t){if(t!=this._pageOnServer){this._pageOnServer=e.asBoolean(t);this._getData()}},enumerable:!0,configurable:!0});Object.defineProperty(RestCollectionView.prototype,"filterOnServer",{get:function(){return this._filterOnServer},set:function(t){if(t!=this._filterOnServer){this._filterOnServer=e.asBoolean(t);this._getData()}},enumerable:!0,configurable:!0});Object.defineProperty(RestCollectionView.prototype,"requestHeaders",{get:function(){return this._requestHeaders},set:function(e){this._requestHeaders=e},enumerable:!0,configurable:!0});RestCollectionView.prototype.updateFilterDefinition=function(e){if(this.filterOnServer){this._filterProvider=e;this._getData()}};Object.defineProperty(RestCollectionView.prototype,"isLoading",{get:function(){return this._loading},enumerable:!0,configurable:!0});RestCollectionView.prototype.onLoading=function(e){this.loading.raise(this,e)};RestCollectionView.prototype.onLoaded=function(e){this.loaded.raise(this,e)};RestCollectionView.prototype.load=function(){this._getData()};RestCollectionView.prototype.onError=function(e){this.error.raise(this,e);return!e.cancel};Object.defineProperty(RestCollectionView.prototype,"totalItemCount",{get:function(){return this.pageOnServer?this._totalItemCount:this._view.length},enumerable:!0,configurable:!0});Object.defineProperty(RestCollectionView.prototype,"pageCount",{get:function(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1},enumerable:!0,configurable:!0});Object.defineProperty(RestCollectionView.prototype,"pageSize",{get:function(){return this._pgSz},set:function(t){if(t!=this._pgSz){this._pgSz=e.asInt(t);if(this.pageOnServer){this._pgIdx=e.clamp(this._pgIdx,0,this.pageCount-1);this._getData()}else this.refresh()}},enumerable:!0,configurable:!0});RestCollectionView.prototype.onPageChanging=function(e){t.prototype.onPageChanging.call(this,e);this.pageOnServer&&!e.cancel&&this._getData();return!e.cancel};RestCollectionView.prototype.commitNew=function(){var e=this,r=this.currentAddItem;if(r)try{var i=this.addItem(r);i&&i.then&&i.then((function(){return e.refresh()}))}catch(e){this._raiseError(e,!0)}t.prototype.commitNew.call(this)};RestCollectionView.prototype.commitEdit=function(){var e=this,r=this.currentEditItem;if(r&&!this.currentAddItem&&!this._sameContent(r,this._edtClone)&&this.items.indexOf(r)>-1)try{var i=this.patchItem(r);i&&i.then&&i.then((function(){return e.refresh()}))}catch(e){this._raiseError(e,!0)}t.prototype.commitEdit.call(this)};RestCollectionView.prototype.remove=function(e){var r=this;if(e&&e!=this.currentAddItem&&this.items.indexOf(e)>-1)try{var i=this.deleteItem(e);i&&i.then&&i.then((function(){return r.refresh()}))}catch(e){this._raiseError(e,!0)}t.prototype.remove.call(this,e)};RestCollectionView.prototype._getPageView=function(){return this.pageOnServer?this._view:t.prototype._getPageView.call(this)};RestCollectionView.prototype._getData=function(){var e=this;this._toGetData&&clearTimeout(this._toGetData);this._toGetData=setTimeout((function(){return __awaiter(e,void 0,void 0,(function(){var e,t,r,i;return __generator(this,(function(n){switch(n.label){case 0:this._toGetData=null;this._loading=!0;this.onLoading();e=null;t=null;n.label=1;case 1:n.trys.push([1,3,,4]);r=this.currentPosition;return[4,this.getItems()];case 2:e=n.sent();this.sourceCollection=e;this.refresh();r>-1&&this.moveCurrentToPosition(r);this.pageIndex>0&&this.pageIndex>=this.pageCount&&this.moveToLastPage();return[3,4];case 3:i=n.sent();t=i;return[3,4];case 4:this._loading=!1;this.onLoaded();t&&this._raiseError(t,!1);return[2]}}))}))}),100)};RestCollectionView.prototype._raiseError=function(e,t){if(this.onError(new i(e))){t&&this._getData();throw"Server Error: "+e}};RestCollectionView.prototype.getItems=function(){throw"This method is virtual: it should be overridden"};RestCollectionView.prototype.addItem=function(e){throw"This method is virtual: it should be overridden"};RestCollectionView.prototype.patchItem=function(e){throw"This method is virtual: it should be overridden"};RestCollectionView.prototype.deleteItem=function(e){throw"This method is virtual: it should be overridden"};return RestCollectionView}(e.collections.CollectionView);t.RestCollectionView=r;var i=function(e){__extends(RESTErrorEventArgs,e);function RESTErrorEventArgs(t){var r=e.call(this)||this;r._error=t;return r}Object.defineProperty(RESTErrorEventArgs.prototype,"error",{get:function(){return this.error},enumerable:!0,configurable:!0});return RESTErrorEventArgs}(e.CancelEventArgs);t.RESTErrorEventArgs=i}(e.rest||(e.rest={}))}(wijmo||(wijmo={}));!function(e){e.rest||(e.rest={}),e._registerModule("wijmo.rest",e.rest)}(wijmo||(wijmo={}));